import chess/evaluate/common
import chess/game
import chess/player
import gleam/int

/// Evaluate king safety score with a pawn shield
/// Positive is good for white, negative is good for black
pub fn king_pawn_shield(game: game.Game, side: player.Player) -> Int {
  // Pawn shield: When the king has castled, it is important to preserve
  // pawns next to it, in order to protect it against the assault. Generally
  // speaking, it is best to keep the pawns unmoved or possibly moved up one
  // square. The lack of a shielding pawn deserves a penalty, even more so if
  // there is an open file next to the king.
  {
    // This is the number of pawns that are 1 square away vertically
    let num_pawns_around_king_close = count_pawns_close(game, side)
    // This is the number of pawns that are 2 squares away vertically
    let num_pawns_around_king_far = count_pawns_far(game, side)

    // instead of doing a penalty, we do a bonus
    // this also encourages the king to castle more rather than punishes

    // all 3 pawns close to the king would be about 120 centipawns
    { num_pawns_around_king_close * 40 }
    // all 3 pawns 1 away from the king would be about 30 centipawns
    + { num_pawns_around_king_far * 10 }
  }
  * common.player(side)
}

pub fn count_pawns_close(game, player) {
  let king_square = game.find_player_king(game, player)
  let gb = game.get_game_bitboard(game)
  let bb = case player {
    player.White -> gb.white_pawns
    player.Black -> gb.black_pawns
  }
  case player {
    player.White ->
      case king_square {
        112 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        96 ->
          case
            int.bitwise_and(
              bb,
              0b1100000000000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b100000000000000000000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000000000000000000000000000 -> 2
            _ -> 0
          }
        80 ->
          case
            int.bitwise_and(
              bb,
              0b11000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b1000000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000000000000000000000 -> 2
            _ -> 0
          }
        64 ->
          case
            int.bitwise_and(bb, 0b110000000000000000000000000000000000000000)
          {
            0b0 -> 0
            0b10000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000 -> 1
            0b110000000000000000000000000000000000000000 -> 2
            _ -> 0
          }
        48 ->
          case int.bitwise_and(bb, 0b1100000000000000000000000000000000) {
            0b0 -> 0
            0b100000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000 -> 2
            _ -> 0
          }
        32 ->
          case int.bitwise_and(bb, 0b11000000000000000000000000) {
            0b0 -> 0
            0b1000000000000000000000000 -> 1
            0b10000000000000000000000000 -> 1
            0b11000000000000000000000000 -> 2
            _ -> 0
          }
        16 ->
          case int.bitwise_and(bb, 0b110000000000000000) {
            0b0 -> 0
            0b10000000000000000 -> 1
            0b100000000000000000 -> 1
            0b110000000000000000 -> 2
            _ -> 0
          }
        0 ->
          case int.bitwise_and(bb, 0b1100000000) {
            0b0 -> 0
            0b100000000 -> 1
            0b1000000000 -> 1
            0b1100000000 -> 2
            _ -> 0
          }
        113 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        97 ->
          case
            int.bitwise_and(
              bb,
              0b11100000000000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b100000000000000000000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000000000000000000000000000 -> 2
            0b10100000000000000000000000000000000000000000000000000000000 -> 2
            0b11000000000000000000000000000000000000000000000000000000000 -> 2
            0b11100000000000000000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        81 ->
          case
            int.bitwise_and(
              bb,
              0b111000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b1000000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000000000000000000000 -> 2
            0b101000000000000000000000000000000000000000000000000 -> 2
            0b110000000000000000000000000000000000000000000000000 -> 2
            0b111000000000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        65 ->
          case
            int.bitwise_and(bb, 0b1110000000000000000000000000000000000000000)
          {
            0b0 -> 0
            0b10000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000 -> 1
            0b110000000000000000000000000000000000000000 -> 2
            0b1010000000000000000000000000000000000000000 -> 2
            0b1100000000000000000000000000000000000000000 -> 2
            0b1110000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        49 ->
          case int.bitwise_and(bb, 0b11100000000000000000000000000000000) {
            0b0 -> 0
            0b100000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000 -> 2
            0b10100000000000000000000000000000000 -> 2
            0b11000000000000000000000000000000000 -> 2
            0b11100000000000000000000000000000000 -> 3
            _ -> 0
          }
        33 ->
          case int.bitwise_and(bb, 0b111000000000000000000000000) {
            0b0 -> 0
            0b1000000000000000000000000 -> 1
            0b10000000000000000000000000 -> 1
            0b100000000000000000000000000 -> 1
            0b11000000000000000000000000 -> 2
            0b101000000000000000000000000 -> 2
            0b110000000000000000000000000 -> 2
            0b111000000000000000000000000 -> 3
            _ -> 0
          }
        17 ->
          case int.bitwise_and(bb, 0b1110000000000000000) {
            0b0 -> 0
            0b10000000000000000 -> 1
            0b100000000000000000 -> 1
            0b1000000000000000000 -> 1
            0b110000000000000000 -> 2
            0b1010000000000000000 -> 2
            0b1100000000000000000 -> 2
            0b1110000000000000000 -> 3
            _ -> 0
          }
        1 ->
          case int.bitwise_and(bb, 0b11100000000) {
            0b0 -> 0
            0b100000000 -> 1
            0b1000000000 -> 1
            0b10000000000 -> 1
            0b1100000000 -> 2
            0b10100000000 -> 2
            0b11000000000 -> 2
            0b11100000000 -> 3
            _ -> 0
          }
        114 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        98 ->
          case
            int.bitwise_and(
              bb,
              0b111000000000000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b1000000000000000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000000000000000000000000000000 -> 2
            0b101000000000000000000000000000000000000000000000000000000000 -> 2
            0b110000000000000000000000000000000000000000000000000000000000 -> 2
            0b111000000000000000000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        82 ->
          case
            int.bitwise_and(
              bb,
              0b1110000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b10000000000000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000000000000 -> 1
            0b110000000000000000000000000000000000000000000000000 -> 2
            0b1010000000000000000000000000000000000000000000000000 -> 2
            0b1100000000000000000000000000000000000000000000000000 -> 2
            0b1110000000000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        66 ->
          case
            int.bitwise_and(bb, 0b11100000000000000000000000000000000000000000)
          {
            0b0 -> 0
            0b100000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000000000000 -> 2
            0b10100000000000000000000000000000000000000000 -> 2
            0b11000000000000000000000000000000000000000000 -> 2
            0b11100000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        50 ->
          case int.bitwise_and(bb, 0b111000000000000000000000000000000000) {
            0b0 -> 0
            0b1000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000000 -> 2
            0b101000000000000000000000000000000000 -> 2
            0b110000000000000000000000000000000000 -> 2
            0b111000000000000000000000000000000000 -> 3
            _ -> 0
          }
        34 ->
          case int.bitwise_and(bb, 0b1110000000000000000000000000) {
            0b0 -> 0
            0b10000000000000000000000000 -> 1
            0b100000000000000000000000000 -> 1
            0b1000000000000000000000000000 -> 1
            0b110000000000000000000000000 -> 2
            0b1010000000000000000000000000 -> 2
            0b1100000000000000000000000000 -> 2
            0b1110000000000000000000000000 -> 3
            _ -> 0
          }
        18 ->
          case int.bitwise_and(bb, 0b11100000000000000000) {
            0b0 -> 0
            0b100000000000000000 -> 1
            0b1000000000000000000 -> 1
            0b10000000000000000000 -> 1
            0b1100000000000000000 -> 2
            0b10100000000000000000 -> 2
            0b11000000000000000000 -> 2
            0b11100000000000000000 -> 3
            _ -> 0
          }
        2 ->
          case int.bitwise_and(bb, 0b111000000000) {
            0b0 -> 0
            0b1000000000 -> 1
            0b10000000000 -> 1
            0b100000000000 -> 1
            0b11000000000 -> 2
            0b101000000000 -> 2
            0b110000000000 -> 2
            0b111000000000 -> 3
            _ -> 0
          }
        115 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        99 ->
          case
            int.bitwise_and(
              bb,
              0b1110000000000000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b10000000000000000000000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000000000000000000000 -> 1
            0b110000000000000000000000000000000000000000000000000000000000 -> 2
            0b1010000000000000000000000000000000000000000000000000000000000 -> 2
            0b1100000000000000000000000000000000000000000000000000000000000 -> 2
            0b1110000000000000000000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        83 ->
          case
            int.bitwise_and(
              bb,
              0b11100000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b100000000000000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000000000000000000000 -> 2
            0b10100000000000000000000000000000000000000000000000000 -> 2
            0b11000000000000000000000000000000000000000000000000000 -> 2
            0b11100000000000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        67 ->
          case
            int.bitwise_and(bb, 0b111000000000000000000000000000000000000000000)
          {
            0b0 -> 0
            0b1000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000000000000000 -> 2
            0b101000000000000000000000000000000000000000000 -> 2
            0b110000000000000000000000000000000000000000000 -> 2
            0b111000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        51 ->
          case int.bitwise_and(bb, 0b1110000000000000000000000000000000000) {
            0b0 -> 0
            0b10000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000 -> 1
            0b110000000000000000000000000000000000 -> 2
            0b1010000000000000000000000000000000000 -> 2
            0b1100000000000000000000000000000000000 -> 2
            0b1110000000000000000000000000000000000 -> 3
            _ -> 0
          }
        35 ->
          case int.bitwise_and(bb, 0b11100000000000000000000000000) {
            0b0 -> 0
            0b100000000000000000000000000 -> 1
            0b1000000000000000000000000000 -> 1
            0b10000000000000000000000000000 -> 1
            0b1100000000000000000000000000 -> 2
            0b10100000000000000000000000000 -> 2
            0b11000000000000000000000000000 -> 2
            0b11100000000000000000000000000 -> 3
            _ -> 0
          }
        19 ->
          case int.bitwise_and(bb, 0b111000000000000000000) {
            0b0 -> 0
            0b1000000000000000000 -> 1
            0b10000000000000000000 -> 1
            0b100000000000000000000 -> 1
            0b11000000000000000000 -> 2
            0b101000000000000000000 -> 2
            0b110000000000000000000 -> 2
            0b111000000000000000000 -> 3
            _ -> 0
          }
        3 ->
          case int.bitwise_and(bb, 0b1110000000000) {
            0b0 -> 0
            0b10000000000 -> 1
            0b100000000000 -> 1
            0b1000000000000 -> 1
            0b110000000000 -> 2
            0b1010000000000 -> 2
            0b1100000000000 -> 2
            0b1110000000000 -> 3
            _ -> 0
          }
        116 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        100 ->
          case
            int.bitwise_and(
              bb,
              0b11100000000000000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b100000000000000000000000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000000000000000000 ->
              1
            0b1100000000000000000000000000000000000000000000000000000000000 -> 2
            0b10100000000000000000000000000000000000000000000000000000000000 ->
              2
            0b11000000000000000000000000000000000000000000000000000000000000 ->
              2
            0b11100000000000000000000000000000000000000000000000000000000000 ->
              3
            _ -> 0
          }
        84 ->
          case
            int.bitwise_and(
              bb,
              0b111000000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b1000000000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000000000000000000000000 -> 2
            0b101000000000000000000000000000000000000000000000000000 -> 2
            0b110000000000000000000000000000000000000000000000000000 -> 2
            0b111000000000000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        68 ->
          case
            int.bitwise_and(
              bb,
              0b1110000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b10000000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000000 -> 1
            0b110000000000000000000000000000000000000000000 -> 2
            0b1010000000000000000000000000000000000000000000 -> 2
            0b1100000000000000000000000000000000000000000000 -> 2
            0b1110000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        52 ->
          case int.bitwise_and(bb, 0b11100000000000000000000000000000000000) {
            0b0 -> 0
            0b100000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000000 -> 2
            0b10100000000000000000000000000000000000 -> 2
            0b11000000000000000000000000000000000000 -> 2
            0b11100000000000000000000000000000000000 -> 3
            _ -> 0
          }
        36 ->
          case int.bitwise_and(bb, 0b111000000000000000000000000000) {
            0b0 -> 0
            0b1000000000000000000000000000 -> 1
            0b10000000000000000000000000000 -> 1
            0b100000000000000000000000000000 -> 1
            0b11000000000000000000000000000 -> 2
            0b101000000000000000000000000000 -> 2
            0b110000000000000000000000000000 -> 2
            0b111000000000000000000000000000 -> 3
            _ -> 0
          }
        20 ->
          case int.bitwise_and(bb, 0b1110000000000000000000) {
            0b0 -> 0
            0b10000000000000000000 -> 1
            0b100000000000000000000 -> 1
            0b1000000000000000000000 -> 1
            0b110000000000000000000 -> 2
            0b1010000000000000000000 -> 2
            0b1100000000000000000000 -> 2
            0b1110000000000000000000 -> 3
            _ -> 0
          }
        4 ->
          case int.bitwise_and(bb, 0b11100000000000) {
            0b0 -> 0
            0b100000000000 -> 1
            0b1000000000000 -> 1
            0b10000000000000 -> 1
            0b1100000000000 -> 2
            0b10100000000000 -> 2
            0b11000000000000 -> 2
            0b11100000000000 -> 3
            _ -> 0
          }
        117 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        101 ->
          case
            int.bitwise_and(
              bb,
              0b111000000000000000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b1000000000000000000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000000000000000000 ->
              1
            0b100000000000000000000000000000000000000000000000000000000000000 ->
              1
            0b11000000000000000000000000000000000000000000000000000000000000 ->
              2
            0b101000000000000000000000000000000000000000000000000000000000000 ->
              2
            0b110000000000000000000000000000000000000000000000000000000000000 ->
              2
            0b111000000000000000000000000000000000000000000000000000000000000 ->
              3
            _ -> 0
          }
        85 ->
          case
            int.bitwise_and(
              bb,
              0b1110000000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b10000000000000000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000000000000000 -> 1
            0b110000000000000000000000000000000000000000000000000000 -> 2
            0b1010000000000000000000000000000000000000000000000000000 -> 2
            0b1100000000000000000000000000000000000000000000000000000 -> 2
            0b1110000000000000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        69 ->
          case
            int.bitwise_and(
              bb,
              0b11100000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b100000000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000000000000000 -> 2
            0b10100000000000000000000000000000000000000000000 -> 2
            0b11000000000000000000000000000000000000000000000 -> 2
            0b11100000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        53 ->
          case int.bitwise_and(bb, 0b111000000000000000000000000000000000000) {
            0b0 -> 0
            0b1000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000000000 -> 2
            0b101000000000000000000000000000000000000 -> 2
            0b110000000000000000000000000000000000000 -> 2
            0b111000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        37 ->
          case int.bitwise_and(bb, 0b1110000000000000000000000000000) {
            0b0 -> 0
            0b10000000000000000000000000000 -> 1
            0b100000000000000000000000000000 -> 1
            0b1000000000000000000000000000000 -> 1
            0b110000000000000000000000000000 -> 2
            0b1010000000000000000000000000000 -> 2
            0b1100000000000000000000000000000 -> 2
            0b1110000000000000000000000000000 -> 3
            _ -> 0
          }
        21 ->
          case int.bitwise_and(bb, 0b11100000000000000000000) {
            0b0 -> 0
            0b100000000000000000000 -> 1
            0b1000000000000000000000 -> 1
            0b10000000000000000000000 -> 1
            0b1100000000000000000000 -> 2
            0b10100000000000000000000 -> 2
            0b11000000000000000000000 -> 2
            0b11100000000000000000000 -> 3
            _ -> 0
          }
        5 ->
          case int.bitwise_and(bb, 0b111000000000000) {
            0b0 -> 0
            0b1000000000000 -> 1
            0b10000000000000 -> 1
            0b100000000000000 -> 1
            0b11000000000000 -> 2
            0b101000000000000 -> 2
            0b110000000000000 -> 2
            0b111000000000000 -> 3
            _ -> 0
          }
        118 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        102 ->
          case
            int.bitwise_and(
              bb,
              0b1110000000000000000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b10000000000000000000000000000000000000000000000000000000000000 ->
              1
            0b100000000000000000000000000000000000000000000000000000000000000 ->
              1
            0b1000000000000000000000000000000000000000000000000000000000000000 ->
              1
            0b110000000000000000000000000000000000000000000000000000000000000 ->
              2
            0b1010000000000000000000000000000000000000000000000000000000000000 ->
              2
            0b1100000000000000000000000000000000000000000000000000000000000000 ->
              2
            0b1110000000000000000000000000000000000000000000000000000000000000 ->
              3
            _ -> 0
          }
        86 ->
          case
            int.bitwise_and(
              bb,
              0b11100000000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b100000000000000000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000000000000000000000000 -> 2
            0b10100000000000000000000000000000000000000000000000000000 -> 2
            0b11000000000000000000000000000000000000000000000000000000 -> 2
            0b11100000000000000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        70 ->
          case
            int.bitwise_and(
              bb,
              0b111000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b1000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000000000000000000 -> 2
            0b101000000000000000000000000000000000000000000000 -> 2
            0b110000000000000000000000000000000000000000000000 -> 2
            0b111000000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        54 ->
          case int.bitwise_and(bb, 0b1110000000000000000000000000000000000000) {
            0b0 -> 0
            0b10000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000 -> 1
            0b110000000000000000000000000000000000000 -> 2
            0b1010000000000000000000000000000000000000 -> 2
            0b1100000000000000000000000000000000000000 -> 2
            0b1110000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        38 ->
          case int.bitwise_and(bb, 0b11100000000000000000000000000000) {
            0b0 -> 0
            0b100000000000000000000000000000 -> 1
            0b1000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000 -> 2
            0b10100000000000000000000000000000 -> 2
            0b11000000000000000000000000000000 -> 2
            0b11100000000000000000000000000000 -> 3
            _ -> 0
          }
        22 ->
          case int.bitwise_and(bb, 0b111000000000000000000000) {
            0b0 -> 0
            0b1000000000000000000000 -> 1
            0b10000000000000000000000 -> 1
            0b100000000000000000000000 -> 1
            0b11000000000000000000000 -> 2
            0b101000000000000000000000 -> 2
            0b110000000000000000000000 -> 2
            0b111000000000000000000000 -> 3
            _ -> 0
          }
        6 ->
          case int.bitwise_and(bb, 0b1110000000000000) {
            0b0 -> 0
            0b10000000000000 -> 1
            0b100000000000000 -> 1
            0b1000000000000000 -> 1
            0b110000000000000 -> 2
            0b1010000000000000 -> 2
            0b1100000000000000 -> 2
            0b1110000000000000 -> 3
            _ -> 0
          }
        119 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        103 ->
          case
            int.bitwise_and(
              bb,
              0b1100000000000000000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b100000000000000000000000000000000000000000000000000000000000000 ->
              1
            0b1000000000000000000000000000000000000000000000000000000000000000 ->
              1
            0b1100000000000000000000000000000000000000000000000000000000000000 ->
              2
            _ -> 0
          }
        87 ->
          case
            int.bitwise_and(
              bb,
              0b11000000000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b1000000000000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000000000000000000000000000 -> 2
            _ -> 0
          }
        71 ->
          case
            int.bitwise_and(
              bb,
              0b110000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b10000000000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000000000 -> 1
            0b110000000000000000000000000000000000000000000000 -> 2
            _ -> 0
          }
        55 ->
          case int.bitwise_and(bb, 0b1100000000000000000000000000000000000000) {
            0b0 -> 0
            0b100000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000000000 -> 2
            _ -> 0
          }
        39 ->
          case int.bitwise_and(bb, 0b11000000000000000000000000000000) {
            0b0 -> 0
            0b1000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000 -> 2
            _ -> 0
          }
        23 ->
          case int.bitwise_and(bb, 0b110000000000000000000000) {
            0b0 -> 0
            0b10000000000000000000000 -> 1
            0b100000000000000000000000 -> 1
            0b110000000000000000000000 -> 2
            _ -> 0
          }
        7 ->
          case int.bitwise_and(bb, 0b1100000000000000) {
            0b0 -> 0
            0b100000000000000 -> 1
            0b1000000000000000 -> 1
            0b1100000000000000 -> 2
            _ -> 0
          }
        _ -> panic
      }
    player.Black ->
      case king_square {
        112 ->
          case
            int.bitwise_and(
              bb,
              0b11000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b1000000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000000000000000000000 -> 2
            _ -> 0
          }
        96 ->
          case
            int.bitwise_and(bb, 0b110000000000000000000000000000000000000000)
          {
            0b0 -> 0
            0b10000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000 -> 1
            0b110000000000000000000000000000000000000000 -> 2
            _ -> 0
          }
        80 ->
          case int.bitwise_and(bb, 0b1100000000000000000000000000000000) {
            0b0 -> 0
            0b100000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000 -> 2
            _ -> 0
          }
        64 ->
          case int.bitwise_and(bb, 0b11000000000000000000000000) {
            0b0 -> 0
            0b1000000000000000000000000 -> 1
            0b10000000000000000000000000 -> 1
            0b11000000000000000000000000 -> 2
            _ -> 0
          }
        48 ->
          case int.bitwise_and(bb, 0b110000000000000000) {
            0b0 -> 0
            0b10000000000000000 -> 1
            0b100000000000000000 -> 1
            0b110000000000000000 -> 2
            _ -> 0
          }
        32 ->
          case int.bitwise_and(bb, 0b1100000000) {
            0b0 -> 0
            0b100000000 -> 1
            0b1000000000 -> 1
            0b1100000000 -> 2
            _ -> 0
          }
        16 ->
          case int.bitwise_and(bb, 0b11) {
            0b0 -> 0
            0b1 -> 1
            0b10 -> 1
            0b11 -> 2
            _ -> 0
          }
        0 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        113 ->
          case
            int.bitwise_and(
              bb,
              0b111000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b1000000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000000000000000000000 -> 2
            0b101000000000000000000000000000000000000000000000000 -> 2
            0b110000000000000000000000000000000000000000000000000 -> 2
            0b111000000000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        97 ->
          case
            int.bitwise_and(bb, 0b1110000000000000000000000000000000000000000)
          {
            0b0 -> 0
            0b10000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000 -> 1
            0b110000000000000000000000000000000000000000 -> 2
            0b1010000000000000000000000000000000000000000 -> 2
            0b1100000000000000000000000000000000000000000 -> 2
            0b1110000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        81 ->
          case int.bitwise_and(bb, 0b11100000000000000000000000000000000) {
            0b0 -> 0
            0b100000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000 -> 2
            0b10100000000000000000000000000000000 -> 2
            0b11000000000000000000000000000000000 -> 2
            0b11100000000000000000000000000000000 -> 3
            _ -> 0
          }
        65 ->
          case int.bitwise_and(bb, 0b111000000000000000000000000) {
            0b0 -> 0
            0b1000000000000000000000000 -> 1
            0b10000000000000000000000000 -> 1
            0b100000000000000000000000000 -> 1
            0b11000000000000000000000000 -> 2
            0b101000000000000000000000000 -> 2
            0b110000000000000000000000000 -> 2
            0b111000000000000000000000000 -> 3
            _ -> 0
          }
        49 ->
          case int.bitwise_and(bb, 0b1110000000000000000) {
            0b0 -> 0
            0b10000000000000000 -> 1
            0b100000000000000000 -> 1
            0b1000000000000000000 -> 1
            0b110000000000000000 -> 2
            0b1010000000000000000 -> 2
            0b1100000000000000000 -> 2
            0b1110000000000000000 -> 3
            _ -> 0
          }
        33 ->
          case int.bitwise_and(bb, 0b11100000000) {
            0b0 -> 0
            0b100000000 -> 1
            0b1000000000 -> 1
            0b10000000000 -> 1
            0b1100000000 -> 2
            0b10100000000 -> 2
            0b11000000000 -> 2
            0b11100000000 -> 3
            _ -> 0
          }
        17 ->
          case int.bitwise_and(bb, 0b111) {
            0b0 -> 0
            0b1 -> 1
            0b10 -> 1
            0b100 -> 1
            0b11 -> 2
            0b101 -> 2
            0b110 -> 2
            0b111 -> 3
            _ -> 0
          }
        1 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        114 ->
          case
            int.bitwise_and(
              bb,
              0b1110000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b10000000000000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000000000000 -> 1
            0b110000000000000000000000000000000000000000000000000 -> 2
            0b1010000000000000000000000000000000000000000000000000 -> 2
            0b1100000000000000000000000000000000000000000000000000 -> 2
            0b1110000000000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        98 ->
          case
            int.bitwise_and(bb, 0b11100000000000000000000000000000000000000000)
          {
            0b0 -> 0
            0b100000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000000000000 -> 2
            0b10100000000000000000000000000000000000000000 -> 2
            0b11000000000000000000000000000000000000000000 -> 2
            0b11100000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        82 ->
          case int.bitwise_and(bb, 0b111000000000000000000000000000000000) {
            0b0 -> 0
            0b1000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000000 -> 2
            0b101000000000000000000000000000000000 -> 2
            0b110000000000000000000000000000000000 -> 2
            0b111000000000000000000000000000000000 -> 3
            _ -> 0
          }
        66 ->
          case int.bitwise_and(bb, 0b1110000000000000000000000000) {
            0b0 -> 0
            0b10000000000000000000000000 -> 1
            0b100000000000000000000000000 -> 1
            0b1000000000000000000000000000 -> 1
            0b110000000000000000000000000 -> 2
            0b1010000000000000000000000000 -> 2
            0b1100000000000000000000000000 -> 2
            0b1110000000000000000000000000 -> 3
            _ -> 0
          }
        50 ->
          case int.bitwise_and(bb, 0b11100000000000000000) {
            0b0 -> 0
            0b100000000000000000 -> 1
            0b1000000000000000000 -> 1
            0b10000000000000000000 -> 1
            0b1100000000000000000 -> 2
            0b10100000000000000000 -> 2
            0b11000000000000000000 -> 2
            0b11100000000000000000 -> 3
            _ -> 0
          }
        34 ->
          case int.bitwise_and(bb, 0b111000000000) {
            0b0 -> 0
            0b1000000000 -> 1
            0b10000000000 -> 1
            0b100000000000 -> 1
            0b11000000000 -> 2
            0b101000000000 -> 2
            0b110000000000 -> 2
            0b111000000000 -> 3
            _ -> 0
          }
        18 ->
          case int.bitwise_and(bb, 0b1110) {
            0b0 -> 0
            0b10 -> 1
            0b100 -> 1
            0b1000 -> 1
            0b110 -> 2
            0b1010 -> 2
            0b1100 -> 2
            0b1110 -> 3
            _ -> 0
          }
        2 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        115 ->
          case
            int.bitwise_and(
              bb,
              0b11100000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b100000000000000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000000000000000000000 -> 2
            0b10100000000000000000000000000000000000000000000000000 -> 2
            0b11000000000000000000000000000000000000000000000000000 -> 2
            0b11100000000000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        99 ->
          case
            int.bitwise_and(bb, 0b111000000000000000000000000000000000000000000)
          {
            0b0 -> 0
            0b1000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000000000000000 -> 2
            0b101000000000000000000000000000000000000000000 -> 2
            0b110000000000000000000000000000000000000000000 -> 2
            0b111000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        83 ->
          case int.bitwise_and(bb, 0b1110000000000000000000000000000000000) {
            0b0 -> 0
            0b10000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000 -> 1
            0b110000000000000000000000000000000000 -> 2
            0b1010000000000000000000000000000000000 -> 2
            0b1100000000000000000000000000000000000 -> 2
            0b1110000000000000000000000000000000000 -> 3
            _ -> 0
          }
        67 ->
          case int.bitwise_and(bb, 0b11100000000000000000000000000) {
            0b0 -> 0
            0b100000000000000000000000000 -> 1
            0b1000000000000000000000000000 -> 1
            0b10000000000000000000000000000 -> 1
            0b1100000000000000000000000000 -> 2
            0b10100000000000000000000000000 -> 2
            0b11000000000000000000000000000 -> 2
            0b11100000000000000000000000000 -> 3
            _ -> 0
          }
        51 ->
          case int.bitwise_and(bb, 0b111000000000000000000) {
            0b0 -> 0
            0b1000000000000000000 -> 1
            0b10000000000000000000 -> 1
            0b100000000000000000000 -> 1
            0b11000000000000000000 -> 2
            0b101000000000000000000 -> 2
            0b110000000000000000000 -> 2
            0b111000000000000000000 -> 3
            _ -> 0
          }
        35 ->
          case int.bitwise_and(bb, 0b1110000000000) {
            0b0 -> 0
            0b10000000000 -> 1
            0b100000000000 -> 1
            0b1000000000000 -> 1
            0b110000000000 -> 2
            0b1010000000000 -> 2
            0b1100000000000 -> 2
            0b1110000000000 -> 3
            _ -> 0
          }
        19 ->
          case int.bitwise_and(bb, 0b11100) {
            0b0 -> 0
            0b100 -> 1
            0b1000 -> 1
            0b10000 -> 1
            0b1100 -> 2
            0b10100 -> 2
            0b11000 -> 2
            0b11100 -> 3
            _ -> 0
          }
        3 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        116 ->
          case
            int.bitwise_and(
              bb,
              0b111000000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b1000000000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000000000000000000000000 -> 2
            0b101000000000000000000000000000000000000000000000000000 -> 2
            0b110000000000000000000000000000000000000000000000000000 -> 2
            0b111000000000000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        100 ->
          case
            int.bitwise_and(
              bb,
              0b1110000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b10000000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000000 -> 1
            0b110000000000000000000000000000000000000000000 -> 2
            0b1010000000000000000000000000000000000000000000 -> 2
            0b1100000000000000000000000000000000000000000000 -> 2
            0b1110000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        84 ->
          case int.bitwise_and(bb, 0b11100000000000000000000000000000000000) {
            0b0 -> 0
            0b100000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000000 -> 2
            0b10100000000000000000000000000000000000 -> 2
            0b11000000000000000000000000000000000000 -> 2
            0b11100000000000000000000000000000000000 -> 3
            _ -> 0
          }
        68 ->
          case int.bitwise_and(bb, 0b111000000000000000000000000000) {
            0b0 -> 0
            0b1000000000000000000000000000 -> 1
            0b10000000000000000000000000000 -> 1
            0b100000000000000000000000000000 -> 1
            0b11000000000000000000000000000 -> 2
            0b101000000000000000000000000000 -> 2
            0b110000000000000000000000000000 -> 2
            0b111000000000000000000000000000 -> 3
            _ -> 0
          }
        52 ->
          case int.bitwise_and(bb, 0b1110000000000000000000) {
            0b0 -> 0
            0b10000000000000000000 -> 1
            0b100000000000000000000 -> 1
            0b1000000000000000000000 -> 1
            0b110000000000000000000 -> 2
            0b1010000000000000000000 -> 2
            0b1100000000000000000000 -> 2
            0b1110000000000000000000 -> 3
            _ -> 0
          }
        36 ->
          case int.bitwise_and(bb, 0b11100000000000) {
            0b0 -> 0
            0b100000000000 -> 1
            0b1000000000000 -> 1
            0b10000000000000 -> 1
            0b1100000000000 -> 2
            0b10100000000000 -> 2
            0b11000000000000 -> 2
            0b11100000000000 -> 3
            _ -> 0
          }
        20 ->
          case int.bitwise_and(bb, 0b111000) {
            0b0 -> 0
            0b1000 -> 1
            0b10000 -> 1
            0b100000 -> 1
            0b11000 -> 2
            0b101000 -> 2
            0b110000 -> 2
            0b111000 -> 3
            _ -> 0
          }
        4 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        117 ->
          case
            int.bitwise_and(
              bb,
              0b1110000000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b10000000000000000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000000000000000 -> 1
            0b110000000000000000000000000000000000000000000000000000 -> 2
            0b1010000000000000000000000000000000000000000000000000000 -> 2
            0b1100000000000000000000000000000000000000000000000000000 -> 2
            0b1110000000000000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        101 ->
          case
            int.bitwise_and(
              bb,
              0b11100000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b100000000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000000000000000 -> 2
            0b10100000000000000000000000000000000000000000000 -> 2
            0b11000000000000000000000000000000000000000000000 -> 2
            0b11100000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        85 ->
          case int.bitwise_and(bb, 0b111000000000000000000000000000000000000) {
            0b0 -> 0
            0b1000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000000000 -> 2
            0b101000000000000000000000000000000000000 -> 2
            0b110000000000000000000000000000000000000 -> 2
            0b111000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        69 ->
          case int.bitwise_and(bb, 0b1110000000000000000000000000000) {
            0b0 -> 0
            0b10000000000000000000000000000 -> 1
            0b100000000000000000000000000000 -> 1
            0b1000000000000000000000000000000 -> 1
            0b110000000000000000000000000000 -> 2
            0b1010000000000000000000000000000 -> 2
            0b1100000000000000000000000000000 -> 2
            0b1110000000000000000000000000000 -> 3
            _ -> 0
          }
        53 ->
          case int.bitwise_and(bb, 0b11100000000000000000000) {
            0b0 -> 0
            0b100000000000000000000 -> 1
            0b1000000000000000000000 -> 1
            0b10000000000000000000000 -> 1
            0b1100000000000000000000 -> 2
            0b10100000000000000000000 -> 2
            0b11000000000000000000000 -> 2
            0b11100000000000000000000 -> 3
            _ -> 0
          }
        37 ->
          case int.bitwise_and(bb, 0b111000000000000) {
            0b0 -> 0
            0b1000000000000 -> 1
            0b10000000000000 -> 1
            0b100000000000000 -> 1
            0b11000000000000 -> 2
            0b101000000000000 -> 2
            0b110000000000000 -> 2
            0b111000000000000 -> 3
            _ -> 0
          }
        21 ->
          case int.bitwise_and(bb, 0b1110000) {
            0b0 -> 0
            0b10000 -> 1
            0b100000 -> 1
            0b1000000 -> 1
            0b110000 -> 2
            0b1010000 -> 2
            0b1100000 -> 2
            0b1110000 -> 3
            _ -> 0
          }
        5 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        118 ->
          case
            int.bitwise_and(
              bb,
              0b11100000000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b100000000000000000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000000000000000000000000 -> 2
            0b10100000000000000000000000000000000000000000000000000000 -> 2
            0b11000000000000000000000000000000000000000000000000000000 -> 2
            0b11100000000000000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        102 ->
          case
            int.bitwise_and(
              bb,
              0b111000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b1000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000000000000000000 -> 2
            0b101000000000000000000000000000000000000000000000 -> 2
            0b110000000000000000000000000000000000000000000000 -> 2
            0b111000000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        86 ->
          case int.bitwise_and(bb, 0b1110000000000000000000000000000000000000) {
            0b0 -> 0
            0b10000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000 -> 1
            0b110000000000000000000000000000000000000 -> 2
            0b1010000000000000000000000000000000000000 -> 2
            0b1100000000000000000000000000000000000000 -> 2
            0b1110000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        70 ->
          case int.bitwise_and(bb, 0b11100000000000000000000000000000) {
            0b0 -> 0
            0b100000000000000000000000000000 -> 1
            0b1000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000 -> 2
            0b10100000000000000000000000000000 -> 2
            0b11000000000000000000000000000000 -> 2
            0b11100000000000000000000000000000 -> 3
            _ -> 0
          }
        54 ->
          case int.bitwise_and(bb, 0b111000000000000000000000) {
            0b0 -> 0
            0b1000000000000000000000 -> 1
            0b10000000000000000000000 -> 1
            0b100000000000000000000000 -> 1
            0b11000000000000000000000 -> 2
            0b101000000000000000000000 -> 2
            0b110000000000000000000000 -> 2
            0b111000000000000000000000 -> 3
            _ -> 0
          }
        38 ->
          case int.bitwise_and(bb, 0b1110000000000000) {
            0b0 -> 0
            0b10000000000000 -> 1
            0b100000000000000 -> 1
            0b1000000000000000 -> 1
            0b110000000000000 -> 2
            0b1010000000000000 -> 2
            0b1100000000000000 -> 2
            0b1110000000000000 -> 3
            _ -> 0
          }
        22 ->
          case int.bitwise_and(bb, 0b11100000) {
            0b0 -> 0
            0b100000 -> 1
            0b1000000 -> 1
            0b10000000 -> 1
            0b1100000 -> 2
            0b10100000 -> 2
            0b11000000 -> 2
            0b11100000 -> 3
            _ -> 0
          }
        6 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        119 ->
          case
            int.bitwise_and(
              bb,
              0b11000000000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b1000000000000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000000000000000000000000000 -> 2
            _ -> 0
          }
        103 ->
          case
            int.bitwise_and(
              bb,
              0b110000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b10000000000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000000000 -> 1
            0b110000000000000000000000000000000000000000000000 -> 2
            _ -> 0
          }
        87 ->
          case int.bitwise_and(bb, 0b1100000000000000000000000000000000000000) {
            0b0 -> 0
            0b100000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000000000 -> 2
            _ -> 0
          }
        71 ->
          case int.bitwise_and(bb, 0b11000000000000000000000000000000) {
            0b0 -> 0
            0b1000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000 -> 2
            _ -> 0
          }
        55 ->
          case int.bitwise_and(bb, 0b110000000000000000000000) {
            0b0 -> 0
            0b10000000000000000000000 -> 1
            0b100000000000000000000000 -> 1
            0b110000000000000000000000 -> 2
            _ -> 0
          }
        39 ->
          case int.bitwise_and(bb, 0b1100000000000000) {
            0b0 -> 0
            0b100000000000000 -> 1
            0b1000000000000000 -> 1
            0b1100000000000000 -> 2
            _ -> 0
          }
        23 ->
          case int.bitwise_and(bb, 0b11000000) {
            0b0 -> 0
            0b1000000 -> 1
            0b10000000 -> 1
            0b11000000 -> 2
            _ -> 0
          }
        7 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        _ -> panic
      }
  }
}

pub fn count_pawns_far(game, player) {
  let king_square = game.find_player_king(game, player)
  let gb = game.get_game_bitboard(game)
  let bb = case player {
    player.White -> gb.white_pawns
    player.Black -> gb.black_pawns
  }
  case player {
    player.White ->
      case king_square {
        112 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        96 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        80 ->
          case
            int.bitwise_and(
              bb,
              0b1100000000000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b100000000000000000000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000000000000000000000000000 -> 2
            _ -> 0
          }
        64 ->
          case
            int.bitwise_and(
              bb,
              0b11000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b1000000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000000000000000000000 -> 2
            _ -> 0
          }
        48 ->
          case
            int.bitwise_and(bb, 0b110000000000000000000000000000000000000000)
          {
            0b0 -> 0
            0b10000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000 -> 1
            0b110000000000000000000000000000000000000000 -> 2
            _ -> 0
          }
        32 ->
          case int.bitwise_and(bb, 0b1100000000000000000000000000000000) {
            0b0 -> 0
            0b100000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000 -> 2
            _ -> 0
          }
        16 ->
          case int.bitwise_and(bb, 0b11000000000000000000000000) {
            0b0 -> 0
            0b1000000000000000000000000 -> 1
            0b10000000000000000000000000 -> 1
            0b11000000000000000000000000 -> 2
            _ -> 0
          }
        0 ->
          case int.bitwise_and(bb, 0b110000000000000000) {
            0b0 -> 0
            0b10000000000000000 -> 1
            0b100000000000000000 -> 1
            0b110000000000000000 -> 2
            _ -> 0
          }
        113 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        97 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        81 ->
          case
            int.bitwise_and(
              bb,
              0b11100000000000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b100000000000000000000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000000000000000000000000000 -> 2
            0b10100000000000000000000000000000000000000000000000000000000 -> 2
            0b11000000000000000000000000000000000000000000000000000000000 -> 2
            0b11100000000000000000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        65 ->
          case
            int.bitwise_and(
              bb,
              0b111000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b1000000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000000000000000000000 -> 2
            0b101000000000000000000000000000000000000000000000000 -> 2
            0b110000000000000000000000000000000000000000000000000 -> 2
            0b111000000000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        49 ->
          case
            int.bitwise_and(bb, 0b1110000000000000000000000000000000000000000)
          {
            0b0 -> 0
            0b10000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000 -> 1
            0b110000000000000000000000000000000000000000 -> 2
            0b1010000000000000000000000000000000000000000 -> 2
            0b1100000000000000000000000000000000000000000 -> 2
            0b1110000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        33 ->
          case int.bitwise_and(bb, 0b11100000000000000000000000000000000) {
            0b0 -> 0
            0b100000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000 -> 2
            0b10100000000000000000000000000000000 -> 2
            0b11000000000000000000000000000000000 -> 2
            0b11100000000000000000000000000000000 -> 3
            _ -> 0
          }
        17 ->
          case int.bitwise_and(bb, 0b111000000000000000000000000) {
            0b0 -> 0
            0b1000000000000000000000000 -> 1
            0b10000000000000000000000000 -> 1
            0b100000000000000000000000000 -> 1
            0b11000000000000000000000000 -> 2
            0b101000000000000000000000000 -> 2
            0b110000000000000000000000000 -> 2
            0b111000000000000000000000000 -> 3
            _ -> 0
          }
        1 ->
          case int.bitwise_and(bb, 0b1110000000000000000) {
            0b0 -> 0
            0b10000000000000000 -> 1
            0b100000000000000000 -> 1
            0b1000000000000000000 -> 1
            0b110000000000000000 -> 2
            0b1010000000000000000 -> 2
            0b1100000000000000000 -> 2
            0b1110000000000000000 -> 3
            _ -> 0
          }
        114 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        98 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        82 ->
          case
            int.bitwise_and(
              bb,
              0b111000000000000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b1000000000000000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000000000000000000000000000000 -> 2
            0b101000000000000000000000000000000000000000000000000000000000 -> 2
            0b110000000000000000000000000000000000000000000000000000000000 -> 2
            0b111000000000000000000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        66 ->
          case
            int.bitwise_and(
              bb,
              0b1110000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b10000000000000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000000000000 -> 1
            0b110000000000000000000000000000000000000000000000000 -> 2
            0b1010000000000000000000000000000000000000000000000000 -> 2
            0b1100000000000000000000000000000000000000000000000000 -> 2
            0b1110000000000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        50 ->
          case
            int.bitwise_and(bb, 0b11100000000000000000000000000000000000000000)
          {
            0b0 -> 0
            0b100000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000000000000 -> 2
            0b10100000000000000000000000000000000000000000 -> 2
            0b11000000000000000000000000000000000000000000 -> 2
            0b11100000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        34 ->
          case int.bitwise_and(bb, 0b111000000000000000000000000000000000) {
            0b0 -> 0
            0b1000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000000 -> 2
            0b101000000000000000000000000000000000 -> 2
            0b110000000000000000000000000000000000 -> 2
            0b111000000000000000000000000000000000 -> 3
            _ -> 0
          }
        18 ->
          case int.bitwise_and(bb, 0b1110000000000000000000000000) {
            0b0 -> 0
            0b10000000000000000000000000 -> 1
            0b100000000000000000000000000 -> 1
            0b1000000000000000000000000000 -> 1
            0b110000000000000000000000000 -> 2
            0b1010000000000000000000000000 -> 2
            0b1100000000000000000000000000 -> 2
            0b1110000000000000000000000000 -> 3
            _ -> 0
          }
        2 ->
          case int.bitwise_and(bb, 0b11100000000000000000) {
            0b0 -> 0
            0b100000000000000000 -> 1
            0b1000000000000000000 -> 1
            0b10000000000000000000 -> 1
            0b1100000000000000000 -> 2
            0b10100000000000000000 -> 2
            0b11000000000000000000 -> 2
            0b11100000000000000000 -> 3
            _ -> 0
          }
        115 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        99 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        83 ->
          case
            int.bitwise_and(
              bb,
              0b1110000000000000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b10000000000000000000000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000000000000000000000 -> 1
            0b110000000000000000000000000000000000000000000000000000000000 -> 2
            0b1010000000000000000000000000000000000000000000000000000000000 -> 2
            0b1100000000000000000000000000000000000000000000000000000000000 -> 2
            0b1110000000000000000000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        67 ->
          case
            int.bitwise_and(
              bb,
              0b11100000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b100000000000000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000000000000000000000 -> 2
            0b10100000000000000000000000000000000000000000000000000 -> 2
            0b11000000000000000000000000000000000000000000000000000 -> 2
            0b11100000000000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        51 ->
          case
            int.bitwise_and(bb, 0b111000000000000000000000000000000000000000000)
          {
            0b0 -> 0
            0b1000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000000000000000 -> 2
            0b101000000000000000000000000000000000000000000 -> 2
            0b110000000000000000000000000000000000000000000 -> 2
            0b111000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        35 ->
          case int.bitwise_and(bb, 0b1110000000000000000000000000000000000) {
            0b0 -> 0
            0b10000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000 -> 1
            0b110000000000000000000000000000000000 -> 2
            0b1010000000000000000000000000000000000 -> 2
            0b1100000000000000000000000000000000000 -> 2
            0b1110000000000000000000000000000000000 -> 3
            _ -> 0
          }
        19 ->
          case int.bitwise_and(bb, 0b11100000000000000000000000000) {
            0b0 -> 0
            0b100000000000000000000000000 -> 1
            0b1000000000000000000000000000 -> 1
            0b10000000000000000000000000000 -> 1
            0b1100000000000000000000000000 -> 2
            0b10100000000000000000000000000 -> 2
            0b11000000000000000000000000000 -> 2
            0b11100000000000000000000000000 -> 3
            _ -> 0
          }
        3 ->
          case int.bitwise_and(bb, 0b111000000000000000000) {
            0b0 -> 0
            0b1000000000000000000 -> 1
            0b10000000000000000000 -> 1
            0b100000000000000000000 -> 1
            0b11000000000000000000 -> 2
            0b101000000000000000000 -> 2
            0b110000000000000000000 -> 2
            0b111000000000000000000 -> 3
            _ -> 0
          }
        116 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        100 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        84 ->
          case
            int.bitwise_and(
              bb,
              0b11100000000000000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b100000000000000000000000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000000000000000000 ->
              1
            0b1100000000000000000000000000000000000000000000000000000000000 -> 2
            0b10100000000000000000000000000000000000000000000000000000000000 ->
              2
            0b11000000000000000000000000000000000000000000000000000000000000 ->
              2
            0b11100000000000000000000000000000000000000000000000000000000000 ->
              3
            _ -> 0
          }
        68 ->
          case
            int.bitwise_and(
              bb,
              0b111000000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b1000000000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000000000000000000000000 -> 2
            0b101000000000000000000000000000000000000000000000000000 -> 2
            0b110000000000000000000000000000000000000000000000000000 -> 2
            0b111000000000000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        52 ->
          case
            int.bitwise_and(
              bb,
              0b1110000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b10000000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000000 -> 1
            0b110000000000000000000000000000000000000000000 -> 2
            0b1010000000000000000000000000000000000000000000 -> 2
            0b1100000000000000000000000000000000000000000000 -> 2
            0b1110000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        36 ->
          case int.bitwise_and(bb, 0b11100000000000000000000000000000000000) {
            0b0 -> 0
            0b100000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000000 -> 2
            0b10100000000000000000000000000000000000 -> 2
            0b11000000000000000000000000000000000000 -> 2
            0b11100000000000000000000000000000000000 -> 3
            _ -> 0
          }
        20 ->
          case int.bitwise_and(bb, 0b111000000000000000000000000000) {
            0b0 -> 0
            0b1000000000000000000000000000 -> 1
            0b10000000000000000000000000000 -> 1
            0b100000000000000000000000000000 -> 1
            0b11000000000000000000000000000 -> 2
            0b101000000000000000000000000000 -> 2
            0b110000000000000000000000000000 -> 2
            0b111000000000000000000000000000 -> 3
            _ -> 0
          }
        4 ->
          case int.bitwise_and(bb, 0b1110000000000000000000) {
            0b0 -> 0
            0b10000000000000000000 -> 1
            0b100000000000000000000 -> 1
            0b1000000000000000000000 -> 1
            0b110000000000000000000 -> 2
            0b1010000000000000000000 -> 2
            0b1100000000000000000000 -> 2
            0b1110000000000000000000 -> 3
            _ -> 0
          }
        117 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        101 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        85 ->
          case
            int.bitwise_and(
              bb,
              0b111000000000000000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b1000000000000000000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000000000000000000 ->
              1
            0b100000000000000000000000000000000000000000000000000000000000000 ->
              1
            0b11000000000000000000000000000000000000000000000000000000000000 ->
              2
            0b101000000000000000000000000000000000000000000000000000000000000 ->
              2
            0b110000000000000000000000000000000000000000000000000000000000000 ->
              2
            0b111000000000000000000000000000000000000000000000000000000000000 ->
              3
            _ -> 0
          }
        69 ->
          case
            int.bitwise_and(
              bb,
              0b1110000000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b10000000000000000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000000000000000 -> 1
            0b110000000000000000000000000000000000000000000000000000 -> 2
            0b1010000000000000000000000000000000000000000000000000000 -> 2
            0b1100000000000000000000000000000000000000000000000000000 -> 2
            0b1110000000000000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        53 ->
          case
            int.bitwise_and(
              bb,
              0b11100000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b100000000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000000000000000 -> 2
            0b10100000000000000000000000000000000000000000000 -> 2
            0b11000000000000000000000000000000000000000000000 -> 2
            0b11100000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        37 ->
          case int.bitwise_and(bb, 0b111000000000000000000000000000000000000) {
            0b0 -> 0
            0b1000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000000000 -> 2
            0b101000000000000000000000000000000000000 -> 2
            0b110000000000000000000000000000000000000 -> 2
            0b111000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        21 ->
          case int.bitwise_and(bb, 0b1110000000000000000000000000000) {
            0b0 -> 0
            0b10000000000000000000000000000 -> 1
            0b100000000000000000000000000000 -> 1
            0b1000000000000000000000000000000 -> 1
            0b110000000000000000000000000000 -> 2
            0b1010000000000000000000000000000 -> 2
            0b1100000000000000000000000000000 -> 2
            0b1110000000000000000000000000000 -> 3
            _ -> 0
          }
        5 ->
          case int.bitwise_and(bb, 0b11100000000000000000000) {
            0b0 -> 0
            0b100000000000000000000 -> 1
            0b1000000000000000000000 -> 1
            0b10000000000000000000000 -> 1
            0b1100000000000000000000 -> 2
            0b10100000000000000000000 -> 2
            0b11000000000000000000000 -> 2
            0b11100000000000000000000 -> 3
            _ -> 0
          }
        118 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        102 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        86 ->
          case
            int.bitwise_and(
              bb,
              0b1110000000000000000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b10000000000000000000000000000000000000000000000000000000000000 ->
              1
            0b100000000000000000000000000000000000000000000000000000000000000 ->
              1
            0b1000000000000000000000000000000000000000000000000000000000000000 ->
              1
            0b110000000000000000000000000000000000000000000000000000000000000 ->
              2
            0b1010000000000000000000000000000000000000000000000000000000000000 ->
              2
            0b1100000000000000000000000000000000000000000000000000000000000000 ->
              2
            0b1110000000000000000000000000000000000000000000000000000000000000 ->
              3
            _ -> 0
          }
        70 ->
          case
            int.bitwise_and(
              bb,
              0b11100000000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b100000000000000000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000000000000000000000000 -> 2
            0b10100000000000000000000000000000000000000000000000000000 -> 2
            0b11000000000000000000000000000000000000000000000000000000 -> 2
            0b11100000000000000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        54 ->
          case
            int.bitwise_and(
              bb,
              0b111000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b1000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000000000000000000 -> 2
            0b101000000000000000000000000000000000000000000000 -> 2
            0b110000000000000000000000000000000000000000000000 -> 2
            0b111000000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        38 ->
          case int.bitwise_and(bb, 0b1110000000000000000000000000000000000000) {
            0b0 -> 0
            0b10000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000 -> 1
            0b110000000000000000000000000000000000000 -> 2
            0b1010000000000000000000000000000000000000 -> 2
            0b1100000000000000000000000000000000000000 -> 2
            0b1110000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        22 ->
          case int.bitwise_and(bb, 0b11100000000000000000000000000000) {
            0b0 -> 0
            0b100000000000000000000000000000 -> 1
            0b1000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000 -> 2
            0b10100000000000000000000000000000 -> 2
            0b11000000000000000000000000000000 -> 2
            0b11100000000000000000000000000000 -> 3
            _ -> 0
          }
        6 ->
          case int.bitwise_and(bb, 0b111000000000000000000000) {
            0b0 -> 0
            0b1000000000000000000000 -> 1
            0b10000000000000000000000 -> 1
            0b100000000000000000000000 -> 1
            0b11000000000000000000000 -> 2
            0b101000000000000000000000 -> 2
            0b110000000000000000000000 -> 2
            0b111000000000000000000000 -> 3
            _ -> 0
          }
        119 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        103 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        87 ->
          case
            int.bitwise_and(
              bb,
              0b1100000000000000000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b100000000000000000000000000000000000000000000000000000000000000 ->
              1
            0b1000000000000000000000000000000000000000000000000000000000000000 ->
              1
            0b1100000000000000000000000000000000000000000000000000000000000000 ->
              2
            _ -> 0
          }
        71 ->
          case
            int.bitwise_and(
              bb,
              0b11000000000000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b1000000000000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000000000000000000000000000 -> 2
            _ -> 0
          }
        55 ->
          case
            int.bitwise_and(
              bb,
              0b110000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b10000000000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000000000 -> 1
            0b110000000000000000000000000000000000000000000000 -> 2
            _ -> 0
          }
        39 ->
          case int.bitwise_and(bb, 0b1100000000000000000000000000000000000000) {
            0b0 -> 0
            0b100000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000000000 -> 2
            _ -> 0
          }
        23 ->
          case int.bitwise_and(bb, 0b11000000000000000000000000000000) {
            0b0 -> 0
            0b1000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000 -> 2
            _ -> 0
          }
        7 ->
          case int.bitwise_and(bb, 0b110000000000000000000000) {
            0b0 -> 0
            0b10000000000000000000000 -> 1
            0b100000000000000000000000 -> 1
            0b110000000000000000000000 -> 2
            _ -> 0
          }
        _ -> panic
      }
    player.Black ->
      case king_square {
        112 ->
          case
            int.bitwise_and(bb, 0b110000000000000000000000000000000000000000)
          {
            0b0 -> 0
            0b10000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000 -> 1
            0b110000000000000000000000000000000000000000 -> 2
            _ -> 0
          }
        96 ->
          case int.bitwise_and(bb, 0b1100000000000000000000000000000000) {
            0b0 -> 0
            0b100000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000 -> 2
            _ -> 0
          }
        80 ->
          case int.bitwise_and(bb, 0b11000000000000000000000000) {
            0b0 -> 0
            0b1000000000000000000000000 -> 1
            0b10000000000000000000000000 -> 1
            0b11000000000000000000000000 -> 2
            _ -> 0
          }
        64 ->
          case int.bitwise_and(bb, 0b110000000000000000) {
            0b0 -> 0
            0b10000000000000000 -> 1
            0b100000000000000000 -> 1
            0b110000000000000000 -> 2
            _ -> 0
          }
        48 ->
          case int.bitwise_and(bb, 0b1100000000) {
            0b0 -> 0
            0b100000000 -> 1
            0b1000000000 -> 1
            0b1100000000 -> 2
            _ -> 0
          }
        32 ->
          case int.bitwise_and(bb, 0b11) {
            0b0 -> 0
            0b1 -> 1
            0b10 -> 1
            0b11 -> 2
            _ -> 0
          }
        16 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        0 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        113 ->
          case
            int.bitwise_and(bb, 0b1110000000000000000000000000000000000000000)
          {
            0b0 -> 0
            0b10000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000 -> 1
            0b110000000000000000000000000000000000000000 -> 2
            0b1010000000000000000000000000000000000000000 -> 2
            0b1100000000000000000000000000000000000000000 -> 2
            0b1110000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        97 ->
          case int.bitwise_and(bb, 0b11100000000000000000000000000000000) {
            0b0 -> 0
            0b100000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000 -> 2
            0b10100000000000000000000000000000000 -> 2
            0b11000000000000000000000000000000000 -> 2
            0b11100000000000000000000000000000000 -> 3
            _ -> 0
          }
        81 ->
          case int.bitwise_and(bb, 0b111000000000000000000000000) {
            0b0 -> 0
            0b1000000000000000000000000 -> 1
            0b10000000000000000000000000 -> 1
            0b100000000000000000000000000 -> 1
            0b11000000000000000000000000 -> 2
            0b101000000000000000000000000 -> 2
            0b110000000000000000000000000 -> 2
            0b111000000000000000000000000 -> 3
            _ -> 0
          }
        65 ->
          case int.bitwise_and(bb, 0b1110000000000000000) {
            0b0 -> 0
            0b10000000000000000 -> 1
            0b100000000000000000 -> 1
            0b1000000000000000000 -> 1
            0b110000000000000000 -> 2
            0b1010000000000000000 -> 2
            0b1100000000000000000 -> 2
            0b1110000000000000000 -> 3
            _ -> 0
          }
        49 ->
          case int.bitwise_and(bb, 0b11100000000) {
            0b0 -> 0
            0b100000000 -> 1
            0b1000000000 -> 1
            0b10000000000 -> 1
            0b1100000000 -> 2
            0b10100000000 -> 2
            0b11000000000 -> 2
            0b11100000000 -> 3
            _ -> 0
          }
        33 ->
          case int.bitwise_and(bb, 0b111) {
            0b0 -> 0
            0b1 -> 1
            0b10 -> 1
            0b100 -> 1
            0b11 -> 2
            0b101 -> 2
            0b110 -> 2
            0b111 -> 3
            _ -> 0
          }
        17 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        1 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        114 ->
          case
            int.bitwise_and(bb, 0b11100000000000000000000000000000000000000000)
          {
            0b0 -> 0
            0b100000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000000000000 -> 2
            0b10100000000000000000000000000000000000000000 -> 2
            0b11000000000000000000000000000000000000000000 -> 2
            0b11100000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        98 ->
          case int.bitwise_and(bb, 0b111000000000000000000000000000000000) {
            0b0 -> 0
            0b1000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000000 -> 2
            0b101000000000000000000000000000000000 -> 2
            0b110000000000000000000000000000000000 -> 2
            0b111000000000000000000000000000000000 -> 3
            _ -> 0
          }
        82 ->
          case int.bitwise_and(bb, 0b1110000000000000000000000000) {
            0b0 -> 0
            0b10000000000000000000000000 -> 1
            0b100000000000000000000000000 -> 1
            0b1000000000000000000000000000 -> 1
            0b110000000000000000000000000 -> 2
            0b1010000000000000000000000000 -> 2
            0b1100000000000000000000000000 -> 2
            0b1110000000000000000000000000 -> 3
            _ -> 0
          }
        66 ->
          case int.bitwise_and(bb, 0b11100000000000000000) {
            0b0 -> 0
            0b100000000000000000 -> 1
            0b1000000000000000000 -> 1
            0b10000000000000000000 -> 1
            0b1100000000000000000 -> 2
            0b10100000000000000000 -> 2
            0b11000000000000000000 -> 2
            0b11100000000000000000 -> 3
            _ -> 0
          }
        50 ->
          case int.bitwise_and(bb, 0b111000000000) {
            0b0 -> 0
            0b1000000000 -> 1
            0b10000000000 -> 1
            0b100000000000 -> 1
            0b11000000000 -> 2
            0b101000000000 -> 2
            0b110000000000 -> 2
            0b111000000000 -> 3
            _ -> 0
          }
        34 ->
          case int.bitwise_and(bb, 0b1110) {
            0b0 -> 0
            0b10 -> 1
            0b100 -> 1
            0b1000 -> 1
            0b110 -> 2
            0b1010 -> 2
            0b1100 -> 2
            0b1110 -> 3
            _ -> 0
          }
        18 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        2 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        115 ->
          case
            int.bitwise_and(bb, 0b111000000000000000000000000000000000000000000)
          {
            0b0 -> 0
            0b1000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000000000000000 -> 2
            0b101000000000000000000000000000000000000000000 -> 2
            0b110000000000000000000000000000000000000000000 -> 2
            0b111000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        99 ->
          case int.bitwise_and(bb, 0b1110000000000000000000000000000000000) {
            0b0 -> 0
            0b10000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000 -> 1
            0b110000000000000000000000000000000000 -> 2
            0b1010000000000000000000000000000000000 -> 2
            0b1100000000000000000000000000000000000 -> 2
            0b1110000000000000000000000000000000000 -> 3
            _ -> 0
          }
        83 ->
          case int.bitwise_and(bb, 0b11100000000000000000000000000) {
            0b0 -> 0
            0b100000000000000000000000000 -> 1
            0b1000000000000000000000000000 -> 1
            0b10000000000000000000000000000 -> 1
            0b1100000000000000000000000000 -> 2
            0b10100000000000000000000000000 -> 2
            0b11000000000000000000000000000 -> 2
            0b11100000000000000000000000000 -> 3
            _ -> 0
          }
        67 ->
          case int.bitwise_and(bb, 0b111000000000000000000) {
            0b0 -> 0
            0b1000000000000000000 -> 1
            0b10000000000000000000 -> 1
            0b100000000000000000000 -> 1
            0b11000000000000000000 -> 2
            0b101000000000000000000 -> 2
            0b110000000000000000000 -> 2
            0b111000000000000000000 -> 3
            _ -> 0
          }
        51 ->
          case int.bitwise_and(bb, 0b1110000000000) {
            0b0 -> 0
            0b10000000000 -> 1
            0b100000000000 -> 1
            0b1000000000000 -> 1
            0b110000000000 -> 2
            0b1010000000000 -> 2
            0b1100000000000 -> 2
            0b1110000000000 -> 3
            _ -> 0
          }
        35 ->
          case int.bitwise_and(bb, 0b11100) {
            0b0 -> 0
            0b100 -> 1
            0b1000 -> 1
            0b10000 -> 1
            0b1100 -> 2
            0b10100 -> 2
            0b11000 -> 2
            0b11100 -> 3
            _ -> 0
          }
        19 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        3 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        116 ->
          case
            int.bitwise_and(
              bb,
              0b1110000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b10000000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000000 -> 1
            0b110000000000000000000000000000000000000000000 -> 2
            0b1010000000000000000000000000000000000000000000 -> 2
            0b1100000000000000000000000000000000000000000000 -> 2
            0b1110000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        100 ->
          case int.bitwise_and(bb, 0b11100000000000000000000000000000000000) {
            0b0 -> 0
            0b100000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000000 -> 2
            0b10100000000000000000000000000000000000 -> 2
            0b11000000000000000000000000000000000000 -> 2
            0b11100000000000000000000000000000000000 -> 3
            _ -> 0
          }
        84 ->
          case int.bitwise_and(bb, 0b111000000000000000000000000000) {
            0b0 -> 0
            0b1000000000000000000000000000 -> 1
            0b10000000000000000000000000000 -> 1
            0b100000000000000000000000000000 -> 1
            0b11000000000000000000000000000 -> 2
            0b101000000000000000000000000000 -> 2
            0b110000000000000000000000000000 -> 2
            0b111000000000000000000000000000 -> 3
            _ -> 0
          }
        68 ->
          case int.bitwise_and(bb, 0b1110000000000000000000) {
            0b0 -> 0
            0b10000000000000000000 -> 1
            0b100000000000000000000 -> 1
            0b1000000000000000000000 -> 1
            0b110000000000000000000 -> 2
            0b1010000000000000000000 -> 2
            0b1100000000000000000000 -> 2
            0b1110000000000000000000 -> 3
            _ -> 0
          }
        52 ->
          case int.bitwise_and(bb, 0b11100000000000) {
            0b0 -> 0
            0b100000000000 -> 1
            0b1000000000000 -> 1
            0b10000000000000 -> 1
            0b1100000000000 -> 2
            0b10100000000000 -> 2
            0b11000000000000 -> 2
            0b11100000000000 -> 3
            _ -> 0
          }
        36 ->
          case int.bitwise_and(bb, 0b111000) {
            0b0 -> 0
            0b1000 -> 1
            0b10000 -> 1
            0b100000 -> 1
            0b11000 -> 2
            0b101000 -> 2
            0b110000 -> 2
            0b111000 -> 3
            _ -> 0
          }
        20 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        4 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        117 ->
          case
            int.bitwise_and(
              bb,
              0b11100000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b100000000000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000000000000000 -> 2
            0b10100000000000000000000000000000000000000000000 -> 2
            0b11000000000000000000000000000000000000000000000 -> 2
            0b11100000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        101 ->
          case int.bitwise_and(bb, 0b111000000000000000000000000000000000000) {
            0b0 -> 0
            0b1000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000000000 -> 2
            0b101000000000000000000000000000000000000 -> 2
            0b110000000000000000000000000000000000000 -> 2
            0b111000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        85 ->
          case int.bitwise_and(bb, 0b1110000000000000000000000000000) {
            0b0 -> 0
            0b10000000000000000000000000000 -> 1
            0b100000000000000000000000000000 -> 1
            0b1000000000000000000000000000000 -> 1
            0b110000000000000000000000000000 -> 2
            0b1010000000000000000000000000000 -> 2
            0b1100000000000000000000000000000 -> 2
            0b1110000000000000000000000000000 -> 3
            _ -> 0
          }
        69 ->
          case int.bitwise_and(bb, 0b11100000000000000000000) {
            0b0 -> 0
            0b100000000000000000000 -> 1
            0b1000000000000000000000 -> 1
            0b10000000000000000000000 -> 1
            0b1100000000000000000000 -> 2
            0b10100000000000000000000 -> 2
            0b11000000000000000000000 -> 2
            0b11100000000000000000000 -> 3
            _ -> 0
          }
        53 ->
          case int.bitwise_and(bb, 0b111000000000000) {
            0b0 -> 0
            0b1000000000000 -> 1
            0b10000000000000 -> 1
            0b100000000000000 -> 1
            0b11000000000000 -> 2
            0b101000000000000 -> 2
            0b110000000000000 -> 2
            0b111000000000000 -> 3
            _ -> 0
          }
        37 ->
          case int.bitwise_and(bb, 0b1110000) {
            0b0 -> 0
            0b10000 -> 1
            0b100000 -> 1
            0b1000000 -> 1
            0b110000 -> 2
            0b1010000 -> 2
            0b1100000 -> 2
            0b1110000 -> 3
            _ -> 0
          }
        21 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        5 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        118 ->
          case
            int.bitwise_and(
              bb,
              0b111000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b1000000000000000000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000000000000000000 -> 2
            0b101000000000000000000000000000000000000000000000 -> 2
            0b110000000000000000000000000000000000000000000000 -> 2
            0b111000000000000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        102 ->
          case int.bitwise_and(bb, 0b1110000000000000000000000000000000000000) {
            0b0 -> 0
            0b10000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000 -> 1
            0b110000000000000000000000000000000000000 -> 2
            0b1010000000000000000000000000000000000000 -> 2
            0b1100000000000000000000000000000000000000 -> 2
            0b1110000000000000000000000000000000000000 -> 3
            _ -> 0
          }
        86 ->
          case int.bitwise_and(bb, 0b11100000000000000000000000000000) {
            0b0 -> 0
            0b100000000000000000000000000000 -> 1
            0b1000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000 -> 2
            0b10100000000000000000000000000000 -> 2
            0b11000000000000000000000000000000 -> 2
            0b11100000000000000000000000000000 -> 3
            _ -> 0
          }
        70 ->
          case int.bitwise_and(bb, 0b111000000000000000000000) {
            0b0 -> 0
            0b1000000000000000000000 -> 1
            0b10000000000000000000000 -> 1
            0b100000000000000000000000 -> 1
            0b11000000000000000000000 -> 2
            0b101000000000000000000000 -> 2
            0b110000000000000000000000 -> 2
            0b111000000000000000000000 -> 3
            _ -> 0
          }
        54 ->
          case int.bitwise_and(bb, 0b1110000000000000) {
            0b0 -> 0
            0b10000000000000 -> 1
            0b100000000000000 -> 1
            0b1000000000000000 -> 1
            0b110000000000000 -> 2
            0b1010000000000000 -> 2
            0b1100000000000000 -> 2
            0b1110000000000000 -> 3
            _ -> 0
          }
        38 ->
          case int.bitwise_and(bb, 0b11100000) {
            0b0 -> 0
            0b100000 -> 1
            0b1000000 -> 1
            0b10000000 -> 1
            0b1100000 -> 2
            0b10100000 -> 2
            0b11000000 -> 2
            0b11100000 -> 3
            _ -> 0
          }
        22 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        6 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        119 ->
          case
            int.bitwise_and(
              bb,
              0b110000000000000000000000000000000000000000000000,
            )
          {
            0b0 -> 0
            0b10000000000000000000000000000000000000000000000 -> 1
            0b100000000000000000000000000000000000000000000000 -> 1
            0b110000000000000000000000000000000000000000000000 -> 2
            _ -> 0
          }
        103 ->
          case int.bitwise_and(bb, 0b1100000000000000000000000000000000000000) {
            0b0 -> 0
            0b100000000000000000000000000000000000000 -> 1
            0b1000000000000000000000000000000000000000 -> 1
            0b1100000000000000000000000000000000000000 -> 2
            _ -> 0
          }
        87 ->
          case int.bitwise_and(bb, 0b11000000000000000000000000000000) {
            0b0 -> 0
            0b1000000000000000000000000000000 -> 1
            0b10000000000000000000000000000000 -> 1
            0b11000000000000000000000000000000 -> 2
            _ -> 0
          }
        71 ->
          case int.bitwise_and(bb, 0b110000000000000000000000) {
            0b0 -> 0
            0b10000000000000000000000 -> 1
            0b100000000000000000000000 -> 1
            0b110000000000000000000000 -> 2
            _ -> 0
          }
        55 ->
          case int.bitwise_and(bb, 0b1100000000000000) {
            0b0 -> 0
            0b100000000000000 -> 1
            0b1000000000000000 -> 1
            0b1100000000000000 -> 2
            _ -> 0
          }
        39 ->
          case int.bitwise_and(bb, 0b11000000) {
            0b0 -> 0
            0b1000000 -> 1
            0b10000000 -> 1
            0b11000000 -> 2
            _ -> 0
          }
        23 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        7 ->
          case int.bitwise_and(bb, 0b0) {
            0b0 -> 0
            _ -> 0
          }
        _ -> panic
      }
  }
}
